<?php

/**
 * @file
 */

include "tpc_general.protect_critical_users.inc";
include "tpc_general.log_permission_changes.inc";

/**
 * Implementation of hook_init().
 */
function tpc_general_init() {
  
  $path = drupal_get_path('module', 'tpc_general');
  // CSS/JS is added to the theme layer so that it gets picked up by the
  // WYSYWYG API editors.
  drupal_add_css($path . '/tpc_general.css', 'theme');
  drupal_add_js($path . '/tpc_general.js', 'theme');
  
  tpc_general_protect_critical_users_init();
}

/**
 * Implements hook_form_alter().
 *
 * Change the delete button text on NODETYPE_node_form.
 */
function tpc_general_form_alter(&$form, &$form_state, $form_id) {
  if ($form['#id'] == "node-form") { 
    if (isset($form['buttons']['delete']['#value'])) {
      $form['buttons']['delete']['#value'] = t('Delete this node FOREVER');
    }
  }
  switch ($form_id) {
    case "node_delete_confirm":
      $form['actions']['submit']['#value'] = t('I don\'t need this node anymore. Delete it forever.');
      break;
  }
}
